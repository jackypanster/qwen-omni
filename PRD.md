# Streamlit 文本转语音（TTS）Web界面方案

## 目标
为 Qwen2.5-Omni-7B 文本转语音（TTS）功能提供一个简单易用的 Web 页面，用户可输入任意文字，点击按钮后生成语音并在线播放。

## 功能需求
1. **前端页面（Streamlit）**
   - 文本输入框：用户输入任意文字。
   - 发音人选择：支持 Chelsie/Ethan。
   - 生成按钮：点击后触发文本转语音。
   - 生成文本展示（可选）。
   - 音频播放控件：在线播放生成的语音。

2. **后端逻辑**
   - 前端将用户输入文本和发音人参数传递给后端。
   - 后端调用 main_text2audio.py 的 text_to_speech 函数，生成音频文件。
   - 返回音频文件路径或内容给前端，供播放。

3. **文件管理**
   - 生成音频文件需唯一命名（如用 uuid 或时间戳），避免多用户/多次请求冲突。
   - 音频文件存放于 output 目录，前端通过相对路径访问。

4. **模型加载优化**
   - 模型加载较慢，建议在 Streamlit 启动时全局加载一次，避免每次请求都重新加载。

5. **用户体验优化**
   - 生成过程中显示进度条或"正在生成"提示。
   - 错误处理：如模型未加载、音频生成失败等，给出友好提示。

## 技术要点
- Streamlit 支持 st.audio 播放本地或二进制音频文件。
- 依赖 soundfile、torch、transformers、streamlit 等。
- 需保证 main_text2audio.py 可被 import，且 __main__ 部分不会被自动执行。
- 如部署到公网，需注意输入合法性和路径安全。

## 可扩展方向
- 支持多语言输入
- 支持音频文件下载
- 支持历史记录
- 支持批量文本转语音

---
本方案为后续开发和维护提供参考。
